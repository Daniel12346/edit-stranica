//TODO: comment and explain web components and svg
const template = document.createElement("template");
template.innerHTML = `
<style>


#pucisca:hover{
  fill: lightgreen;
}
</style>
<svg
  xmlns="http://www.w3.org/2000/svg"
  xmlnsXlink="http://www.w3.org/1999/xlink"
  viewBox="0 0 69.776 27.399"
>
  <defs>
    <linearGradient id="a">
      <stop offset="0" stop-color="#4dd23f" stop-opacity=".157" />
      <stop offset="1" stop-color="#2bf0f3" stop-opacity=".867" />
    </linearGradient>
    <radialGradient
      xlinkHref="#a"
      id="b"
      cx="47.103"
      cy="8.207"
      fx="47.103"
      fy="8.207"
      r="2.283"
      gradientUnits="userSpaceOnUse"
      gradientTransform="matrix(1.04896 0 0 1.04896 -2.903 -.309)"
    />
  </defs>
  <path
    id="map"
    d="M69.038 18.662c0 .36.278.126.013.273-.279.154-.832-.183-1.049-.048-.081.051-.208.099-.275.236-.053.107-.042.304-.117.362-.153.117-.405-.013-.46.103-.023.047.324.093.298.136-.31.516-.533.956-.574 1.2-.146.868 1.053.651.113 1.238-.4.248-.587.07-.996.266-.278.132-.028-1.042-.347-1.042-.133 0-.802-.149-.973-.027-.13.093.488.76.404.908-.093.165-.576-.003-.526.194.123.49-.576.294-.663.354-.561.393-.071.928-.289 1.305-.069.12-.631-.077-.68.168-.086.431-.484.285-.707.27-.342-.025-.423-.875-.73-.723-.29.146.34.717.134.968-.04.049-.178.019-.227.045-.325.18-.735-.009-1.224.037-.138.013-.271.088-.402.112-.453.085-.866.157-1.264.103a11.13 11.13 0 0 1-.603-.1c-.167-.037-.274-.311-.392-.25-.17.087-.207.442-.367.458-.55.053-1.028-.21-1.285-.017-.566.426-.613 1.023-1.701.915-.461-.046-1.029-.4-1.495-.146-.08.044-.152.152-.241.169-.234.044-.423-.123-.748-.082-.106.014-.253-.196-.36-.199-.08-.002-.161.196-.241.193-.072-.003-.144-.205-.215-.207-.13-.003-.246.258-.374.25-.205-.012-.303-.317-.507-.326-.191-.01-.33.312-.52.294-.243-.022-.328-.681-.577-.691-.26-.011-.189.75-.43.651a1.32 1.32 0 0 0-.518-.083c-.243.012-.499.09-.628.074-.712-.084-1.443-.094-2.271-.1-.158-.001-.318.17-.48.164-.269-.01-.531-.289-.814-.27-.067.004-.12.25-.189.254-.088.007-.217-.092-.307-.084-.21.02-.383.23-.601.255-.21.024-.396.208-.613.23-.538.058-1.216.336-1.794.337-.088 0-.375-.156-.478-.135-.324.067-.502.352-.696.137-.367-.405-1.289-.542-2.018-.632-.291-.036-.595.156-.91.15-.242-.004-.529-.202-.779-.16-.126.02-.293.333-.384.353-.645-.047-1.156.143-1.708.055-.161-.025-.344.04-.493.007-.255-.054-.355.943-.562.82-.18-.108-.304-.657-.445-.808-.212-.226-.616-.241-.854-.204-.965.15-1.09-.278-1.586-.546-.278-.15-.535-.014-.804-.071-1.307-.277-2.325-.31-3.59-.458-.857-.1-1.91-.35-3.007-.544-.416-.073-.804.228-1.24.013-.649-.32-1.75-.104-2.518-.451-.348-.157-1.476-.432-2.068-.954-.243-.215-.194-.656-.463-.544-.123.051.063.29-.014.398a.281.281 0 0 1-.258.1c-.34-.051-.524-.362-.807-.646-.311-.313.003-.775-.277-.96-.12-.08-.37.832-.484.757-.262-.173-.258.038-.494-.142-.078-.06-.486-.367-.288-.606.405-.487.513-.753.434-.73-.11.031-.526.477-.547.416-.128-.352-.252-.681-.344-.737-.408-.247-.196.782-.65.61-.09-.035-.218-.482-.44-.89-.085-.157-.391-.3-.465-.522-.088-.261.058-.596-.02-.663-.218-.187-.23.267-.406.47-.151.175-.468.105-.616-.035-.288-.273-.399-.609-.613-.801-.114-.102-.456-.04-.453-.167.006-.279 0-.591-.116-.76-.082-.12-.273-.105-.325-.228-.178-.415-.104-.777-.193-.6-.074.148.134.656.173 1.03.023.226-.105.415-.138.411a1.359 1.359 0 0 0-.267 0c-.167.015-.063-.49-.18-.578-.086-.066-.354.604-.617.525-.374-.112-.341-.08-.443-.322-.128-.306-.112-.942.25-1.114 0 0-.273-.193-.333-.248-.514-.477-.844-.733-1.24-.785 0 0 .515.54.55.938.04.453-.294.674-.324.652-.12-.09-.332-.24-.454-.418-.14-.2-.189-.421-.304-.337-.242.178-.808.426-.924-.126-.063-.3.149-.661.149-1.003 0-.16-.93.82-1.437.481-.463-.309-.496-.705-1.03-.923-.863-.353-2.107-.52-1.523-.413 0 0 .06-.04.047-.153-.025-.22-.064-.613.472-.804.081-.03.101-.322.02-.362l-.357-.173-.015-.163c-.102-1.105-.344-2.169.09-2.022.35.118.684.246.99.381 1.112.493.65 1.267 1.62 1.541.59.167.786-.454 1.208-.399.072.01.912.228.869-.02-.004-.024-.095-.081-.122-.143-.038-.092-.025-.195-.11-.219-.198-.056-.492.102-.649-.07-.221-.243-.133-.79-.16-.957-.012-.084-.157-.142-.18-.222-.094-.334.151-.536.079-.833-.076-.31-.372-.63-.255-.757.558-.604 1.013-.767 1.29-.905.021-.01.3.216.342.176.055-.052-.124-.372-.104-.384.295-.172.179-.165.731-.435.03-.014.125.028.297.115.051.026.12-.131.164-.117.145.046.262.134.348.054.073-.069-.085-.3-.027-.3.623-.002 1.01-.074-.883-.358-.24-.036-.378-.468-.45-.856-.013-.07.103-.076.211-.12.25-.102.535-.314-.02-.788-.22-.188.432-.407.326-.606-.121-.227-.374-.498-.6-.715-.043-.042.237-.774.034-.81-.209-.036-.103.505-.309.556-.294.074-.598-.426-.764-.494-.231-.095-.426-.44-.5-.964-.017-.126.033-.353-.011-.472-.06-.162-.256-.248-.344-.376-.068-.1.023-.196-.002-.301-.024-.105-.165-.218-.168-.312-.022-.602.105-.514.386-.636.092-.04.082-.237.244-.31.51-.23 1.132-.059 1.864.062.081.013.273.201.468.256.176.05.441-.176.515-.16 1.505.307 2.745.818 4.45 1.16.461.092.916-.028 1.357.004 1.155.086 1.157.106 1.982.08.235-.007.732.37 1.143.356.564-.02 1.066-.438 1.422-.486.078-.01.33.313.712.453.16.059.25-.232.42-.206.34.053.736.383.822.375.187-.016-.027-.57.076-.583.592-.072.735-.248 1.412-.04.28.086.61.088.9.304.213.158.514.344.748.45.304.137.873.141 1.204.2.631.114 1.09.318 1.628.394 1.132.162 2.025-.382 2.828-.118.15.05-.185.362-.068.468.06.055.157-.062.24-.059.12.004.254.192.345.112.14-.123-.232-.415-.103-.55.368-.385 1.054.17 1.58.22.089.01.117.192.24.345.18.227.462.455.618.5.228.064.342-.552.537-.453.15.077.143.262.298.318.102.036-.538-.264.44-.338.436-.033.748.482 1.218.482.16 0 .508-.254.68-.15.153.091.165.298.292.312.167.018.193-.171.359-.143.098.017.19.242.29.262.157.032-.114.054.079-.113.093-.081.336.078.503.117.226.054.383.015.503.047.063.017.098.335.219.363.175.041.405-.06.497-.035.054.015.137.25.185.532.026.152-.01.267.104.29 0 0 .272-.653.354-.63.653.185 1.192.171 1.818.32.06.014-.038.772.018.915.033.082.107.05.312-.661.088-.306.428.153.817.262.634.176 1.414.03 1.789.23.315.169-.145.605.182.68.11.025.103-.263.253-.432.135-.15.427-.184.524-.158.407.11.832.45 1.22.535.11.024.296 1.597.531-.144.043-.315.374.295.696.432.406.172.845-.063 1.205.03.066.017.317.501.303 1.34-.005.327.13.642.107.868-.052.522-.617.576-.587.828 0 0 .467-.522.745-.394.352.162.345.556.396.498.04-.046-.045-.423-.16-.958-.083-.379-.207-.837-.197-1.313.024-1.204.898-.58.938-.57.295.075.548-.257.803-.2.365.082.714.34 1.024.429.987.28 1.938.276 2.968.345.344.4.342.084.36.81.09-.01.302-.073.35-.07.249.02.28-.306.56-.18.219.097.478.409.687.405.225-.004.23-.486.467-.435.325.07 1.01.694 1.409.748.299.041.304-.52.6-.331.066.041.256.383.521.685.333.379.719.749.387 1-.425.32-1.346.225-2.147.392-.977.203-1.182.44-1.068.658.06.116.415-.156 1.152-.243.559-.066 1.105-.188 1.646-.093.189.034-1.33 2.344.529.227.263-.3.433-.21.47-.194.228.103-.043.767.166.639.141-.087 1.279.798 1.524.608.267-.207-.676-.806-.599-1.214.046-.24.572.03.913-.07.296-.087.406-.566.52-.513.499.234.82.72 1.128.933.144.1.464-.054.584.031.342.242.404.839.65 1.09.226.228.63.11 1.035.311.057.028.356.329.297.525-.068.225-.498.355-.455.495.048.158.526-.078.604-.042.207.097.736.093.948.191.242.113.429.37.663.462 1.252.49 2.391.612 2.823 1.573.053.118.165.47.006.827-.038.087-.192.174-.252.258-.067.094-.297.027-.371.11-.099.11-.042.366-.144.436-.496.345-.965.005-.871.22.14.32.386.725.84.774z"
    stroke-dashoffset="47.811"
    stroke-opacity=".106"
    stroke-linejoin="round"
    stroke-linecap="round"
    stroke-width=".009"
    stroke="#000"
    fill-opacity=".983"
    fill="#006673"

  />
  <circle
    cx="46.507"
    cy="8.3"
    r="12.384"
    fill="url(#b)"
    fill-opacity=".573"
    stroke="#000"
    stroke-width=".022"
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-dashoffset="47.811"
    stroke-opacity=".106"
  />
  <a transform="translate(-4.546 1.92)">

    <path
      id="pucisca"
      d="M53.215 6.363a2.161 2.161 0 0 1-2.162 2.161 2.161 2.161 0 0 1-2.16-2.161 2.161 2.161 0 0 1 2.16-2.162 2.161 2.161 0 0 1 2.162 2.162z"
      fill="#3fd25b"
      fill-opacity=".614"
      stroke="#000"
      stroke-width=".02"
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-dashoffset="47.811"
      stroke-opacity=".106"
    />
  </a>
</svg>`;

class BracMap extends HTMLElement {
  constructor() {
    super();
    this.$root = this.attachShadow({ mode: "open" });
    this.$root.appendChild(template.content.cloneNode(true));
    [this.pucisca, this.map] = selectById(this.$root, "pucisca", "map");
    //TODO: sections, scrolling,...
    this.fill && this.map.setAttribute("style", `fill: ${this.fill}`);
  }
  connectedCallback() {
    this.pucisca.addEventListener("click", () => {
      select(document, "footer")[0].scrollIntoView();
    });
  }
  get fill() {
    if (!this.hasAttribute("fill")) {
      return null;
    }
    return this.getAttribute("fill");
  }
  //postavlja atribut fill s kojim  u konstruktoru odreÄ‘ujemo boju svg-ja
  set fill(color) {
    color ? this.setAttribute("fill", color) : this.removeAttribute("fill");
    this.map.setAttribute("style", `fill: ${color}`);
  }

  static get observedAttributes() {
    return ["fill"];
  }
}

window.customElements.define("ie-brac-map", BracMap);
